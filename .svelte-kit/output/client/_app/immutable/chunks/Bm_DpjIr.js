import"./DsnmJJEf.js";import{i as rt}from"./VjwJ5DFS.js";import{c as it,o as ot,a as st,e as x,s as h}from"./4tzv8gyV.js";import{p as nt,e as t,m as y,b as S,q as lt,g as i,h as d,r as o,i as a,t as M,u as g,o as n,a as P,d as dt,f as ct,v as Le}from"./CBH2oh36.js";import{i as U}from"./TFLlWf41.js";import{s as _e,r as ye}from"./fbDB8B4R.js";import{s as H}from"./v6OzXV5o.js";import{b as ke}from"./CY7Vc3nc.js";import{p as ut,b as vt}from"./iNgm-5_2.js";import{b as Ce,p as ae,i as mt}from"./Dcu89xNq.js";import{t as s}from"./BlvcK136.js";import{s as $}from"./DxmBqDFk.js";var pt=S('<div class="fixed sm:absolute right-4 left-4 sm:right-0 sm:left-auto mt-2 w-auto sm:w-40 bg-white/15 border rounded shadow-lg backdrop-blur-md p-1 z-50" style="border-image: linear-gradient(135deg, #D4AF37 0%, #B8860B 100%) 1;"><button>English</button> <button>Deutsch</button> <button>Polski</button></div>'),gt=S('<p class="mt-2 text-sm text-red-300"> </p>'),ft=S('<p class="mt-2 text-sm text-green-300"> </p>'),ht=Le('<svg class="w-4 h-4 animate-spin text-white" viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="12" cy="12" r="10" stroke-width="2" opacity="0.25"></circle><path d="M12 2a10 10 0 0 1 10 10" stroke-width="2" opacity="0.75"></path></svg>'),wt=Le('<svg class="w-4 h-4 animate-spin text-[#0C6E78]" viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="12" cy="12" r="10" stroke-width="2" opacity="0.25"></circle><path d="M12 2a10 10 0 0 1 10 10" stroke-width="2" opacity="0.75"></path></svg>'),bt=S('<form class="space-y-6"><div><label for="email" class="block text-sm font-medium text-white/80 mb-2"> </label> <input type="email" id="email" required autocomplete="email" class="w-full px-4 py-3 leading-relaxed text-white placeholder-white/60 bg-white/20 rounded focus:outline-none transition-all duration-200 shadow-inner backdrop-blur-sm"/></div> <div><label for="password" class="block text-sm font-medium text-white/80 mb-2"> </label> <input type="password" id="password" placeholder="••••••••" autocomplete="new-password" class="w-full px-4 py-3 leading-relaxed text-white placeholder-white/60 bg-white/20 rounded focus:outline-none transition-all duration-200 shadow-inner backdrop-blur-sm"/> <!> <!> <div class="mt-2 text-right"><a href="/login#forgot-password"> </a></div></div> <button type="submit" class="w-full px-6 py-3 text-sm font-bold text-white rounded shadow-md transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed relative overflow-hidden group flex items-center justify-center gap-2 border font-primary" style="background: linear-gradient(135deg, #0C6E78 0%, #0A5A63 100%); border-image: linear-gradient(135deg, #D4AF37 0%, #B8860B 100%) 1;"><div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div> <!> <span class="relative z-10"> </span></button> <button type="button" class="w-full px-6 py-3 text-sm font-bold text-[#0C6E78] bg-white/80 hover:bg-white rounded shadow-md transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 border relative overflow-hidden group" style="border-image: rounded linear-gradient(135deg, #D4AF37 0%, #B8860B 100%) 1;"><div class="absolute inset-0 bg-gradient-to-r from-transparent via-black/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div> <!> </button></form> <div class="mt-6 text-center"><a href="/sales" class="text-sm text-white/80 hover:text-white underline underline-offset-4 transition-colors"> </a></div>',1),xt=S('<div class="fixed inset-0 z-50 flex items-center justify-center"><div class="absolute inset-0 bg-black/50" role="button" tabindex="0" aria-label="Close"></div> <div class="relative z-10 w-full max-w-md mx-auto rounded shadow-xl p-6 text-white" style="background: linear-gradient(135deg, #0C6E78 0%, #0A5A63 100%);"><h3 class="text-lg font-semibold mb-2 font-primary"> </h3> <p class="text-sm text-white/80 mb-4"> </p> <div class="flex items-center gap-3 justify-end"><button type="button" class="px-4 py-2 text-sm rounded bg-white/10 hover:bg-white/20 border border-white/20"> </button> <button type="button" class="px-4 py-2 text-sm font-semibold rounded text-[#0C6E78] bg-white hover:bg-white/90"> </button></div></div></div>'),_t=S('<div class="min-h-screen bg-gradient-to-br from-primary-light via-primary to-secondary-dark flex items-center justify-center py-8 px-4 sm:px-6 lg:px-8 relative"><div class="fixed top-4 right-4 z-50"><div class="relative"><button class="inline-flex items-center justify-center w-10 h-10 rounded bg-white/15 border text-white/90 hover:bg-white/20 transition-colors focus:outline-none focus:ring-2 focus:ring-white/50" style="border-image: linear-gradient(135deg, #D4AF37 0%, #B8860B 100%) 1;" aria-haspopup="menu" title="Change language"><span class="sr-only">Change language</span> <span class="text-sm font-medium"> </span></button> <!></div></div> <div class="w-full max-w-md"><div class="p-8"><div class="text-center mb-8"><div class="w-16 h-16 bg-white/20 border border-white/30 rounded mx-auto mb-4 flex items-center justify-center shadow-md backdrop-blur-sm"><svg class="w-8 h-8 text-white/90" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg></div> <h1 class="text-3xl font-bold text-white mb-2 font-primary"> </h1> <p class="text-white/80 font-secondary"> </p></div> <!> <!> <div class="mt-8 pt-6 border-t border-white/20"><p class="text-xs text-white/70 text-center leading-relaxed"> </p></div></div></div></div>');function zt(Ee,re){nt(re,!1);const ie=it();let w=y(""),J=y(""),m=y(""),k=y(""),p=y(!1),_=y(null),L=y(!1),r=ut(re,"currentLanguage",12,"en"),oe=y(!1),C=y(!1),N=y(null);const Pe="shadowwork_language";function Ae(e){try{const u=new Date(Date.now()+63072e6).toUTCString(),c=typeof window<"u"&&window.location.protocol==="https:"?"; Secure":"";document.cookie=`${Pe}=${encodeURIComponent(e)}; Expires=${u}; Path=/; SameSite=Lax${c}`}catch{}}function Be(){try{const e=document.cookie.match(/(?:^|;\s*)shadowwork_language=([^;]+)/),l=e?decodeURIComponent(e[1]):null;return l==="en"||l==="de"||l==="pl"?l:null}catch{return null}}function se(e){a(C)&&a(N)&&!a(N).contains(e.target)&&t(C,!1)}ot(()=>{t(oe,!0);try{let e=null;Ce&&(e=Be()??localStorage.getItem("shadowwork_language")),(e==="en"||e==="de"||e==="pl")&&r(e)}catch{}document.addEventListener("click",se)}),st(()=>{document.removeEventListener("click",se)});function Q(e){r(e);try{Ce&&(localStorage.setItem("shadowwork_language",e),Ae(e),document.documentElement.lang=e)}catch{}}function q(e){return/.+@.+\..+/.test(e)}async function Ue(){t(m,""),t(k,"");const e=a(w).trim().toLowerCase();if(!q(e)){t(m,"Please enter a valid email address");return}const{data:{user:l}}=await $.auth.getUser();if(l)if(await mt()){const A=l.email??e;ie("login",{username:A});return}else try{await $.auth.signOut()}catch{}t(p,!0),t(_,"link");const u=`${location.origin}/login`,{error:c}=await $.auth.signInWithOtp({email:e,options:{shouldCreateUser:!1,emailRedirectTo:u}});if(t(p,!1),t(_,null),c){const f=(c.message||"").toLowerCase();f.includes("user not found")?t(m,"No account found for this email."):f.includes("redirect")?t(m,"Invalid redirect URL. Add /login to Supabase Auth URLs."):t(m,"Unable to send login link. Please try again later.");return}t(k,"A login link has been sent to your email. Please check your inbox.")}async function Re(){t(m,""),t(k,"");const e=a(w).trim().toLowerCase(),l=a(J);if(!q(e)){t(m,"Please enter a valid email address");return}if(!l){t(m,"Please enter your password");return}t(p,!0),t(_,"login");const{data:u,error:c}=await $.auth.signInWithPassword({email:e,password:l});if(c){(c.message||"").toLowerCase().includes("invalid login credentials")?t(m,"Invalid email or password."):t(m,"Login failed. Please try again."),t(p,!1),t(_,null);return}const{data:{user:f}}=await $.auth.getUser(),A=f?.email??e;ie("login",{username:A}),t(k,s(r(),"login.redirecting"))}async function De(){t(m,""),t(k,"");const e=a(w).trim().toLowerCase();if(!q(e)){t(m,"Please enter a valid email address");return}t(p,!0);const l=`${location.origin}/reset`,{error:u}=await $.auth.resetPasswordForEmail(e,{redirectTo:l});if(t(p,!1),u){const c=(u.message||"").toLowerCase();c.includes("user not found")?t(m,"No account found for this email."):c.includes("redirect")?t(m,"Invalid redirect URL. Add /reset to Supabase Auth URLs."):t(m,"Could not send reset email. Please try again.");return}t(k,"Password reset email sent. Check your inbox.")}function Ie(){t(m,""),t(k,"");const e=a(w).trim().toLowerCase();if(!q(e)){t(m,"Please enter a valid email address");return}t(L,!0)}async function ze(){t(L,!1),await De()}function Me(e){e.key==="Escape"&&a(L)&&t(L,!1)}rt();var X=_t();x("keydown",lt,Me);var G=i(X),ne=i(G),j=i(ne),le=d(i(j),2),$e=i(le,!0);o(le),o(j);var Se=d(j,2);{var je=e=>{var l=pt(),u=i(l),c=d(u,2),f=d(c,2);o(l),M(()=>{H(u,1,`w-full text-left px-3 py-2 text-sm rounded hover:bg-white/20 text-white ${r()==="en"?"bg-white/10":""}`),H(c,1,`w-full text-left px-3 py-2 text-sm rounded hover:bg-white/20 text-white ${r()==="de"?"bg-white/10":""}`),H(f,1,`w-full text-left px-3 py-2 text-sm rounded hover:bg-white/20 text-white ${r()==="pl"?"bg-white/10":""}`)}),x("click",u,()=>{Q("en"),t(C,!1)}),x("click",c,()=>{Q("de"),t(C,!1)}),x("click",f,()=>{Q("pl"),t(C,!1)}),P(e,l)};U(Se,e=>{a(C)&&e(je)})}o(ne),o(G),vt(G,e=>t(N,e),()=>a(N));var de=d(G,2),ce=i(de),Y=i(ce),Z=d(i(Y),2),Fe=i(Z,!0);o(Z);var ue=d(Z,2),Oe=i(ue,!0);o(ue),o(Y);var ve=d(Y,2);{var Te=e=>{var l=bt(),u=ct(l),c=i(u),f=i(c),A=i(f,!0);o(f);var E=d(f,2);ye(E),o(c);var F=d(c,2),R=i(F),D=i(R,!0);o(R);var O=d(R,2);ye(O);var I=d(O,2);{var ee=v=>{var b=gt(),T=i(b,!0);o(b),M(()=>h(T,a(m))),P(v,b)};U(I,v=>{a(m)&&v(ee)})}var B=d(I,2);{var te=v=>{var b=ft(),T=i(b,!0);o(b),M(()=>h(T,a(k))),P(v,b)};U(B,v=>{a(k)&&v(te)})}var K=d(B,2),z=i(K),Ge=i(z,!0);o(z),o(K),o(F);var W=d(F,2),fe=d(i(W),2);{var Ke=v=>{var b=ht();P(v,b)};U(fe,v=>{a(p)&&a(_)==="login"&&v(Ke)})}var he=d(fe,2),We=i(he,!0);o(he),o(W);var V=d(W,2),we=d(i(V),2);{var Ve=v=>{var b=wt();P(v,b)};U(we,v=>{a(p)&&a(_)==="link"&&v(Ve)})}var He=d(we);o(V),o(u);var be=d(u,2),xe=i(be),Je=i(xe,!0);o(xe),o(be),M((v,b,T,Qe,Xe,Ye,Ze,et,tt,at)=>{h(A,v),_e(E,"placeholder",b),h(D,T),H(z,1,Qe),h(Ge,Xe),W.disabled=Ye,h(We,Ze),V.disabled=et,h(He,` ${tt??""}`),h(Je,at)},[()=>(n(s),n(r()),g(()=>s(r(),"login.emailLabel"))),()=>(n(s),n(r()),g(()=>s(r(),"login.emailPlaceholder"))),()=>(n(s),n(r()),g(()=>s(r(),"login.passwordLabel"))),()=>(a(w),a(p),g(()=>`text-xs text-white/70 hover:text-white underline underline-offset-4 ${!a(w).trim()||a(p)?"pointer-events-none opacity-50":""}`)),()=>(n(s),n(r()),g(()=>s(r(),"login.forgotPasswordLink"))),()=>(a(w),a(p),g(()=>!a(w).trim()||a(p))),()=>(a(p),a(_),n(s),n(r()),g(()=>a(p)&&a(_)==="login"?s(r(),"login.loggingIn"):s(r(),"login.loginButton"))),()=>(a(w),a(p),g(()=>!a(w).trim()||a(p))),()=>(a(p),a(_),n(s),n(r()),g(()=>a(p)&&a(_)==="link"?s(r(),"login.sendingLink"):s(r(),"login.sendLinkButton"))),()=>(n(s),n(r()),g(()=>s(r(),"login.learnMore")))]),ke(E,()=>a(w),v=>t(w,v)),ke(O,()=>a(J),v=>t(J,v)),x("click",z,ae(Ie)),x("click",V,ae(Ue)),x("submit",u,ae(Re)),P(e,l)};U(ve,e=>{a(oe)&&e(Te)})}var me=d(ve,2);{var Ne=e=>{var l=xt(),u=i(l),c=d(u,2),f=i(c),A=i(f,!0);o(f);var E=d(f,2),F=i(E,!0);o(E);var R=d(E,2),D=i(R),O=i(D,!0);o(D);var I=d(D,2),ee=i(I,!0);o(I),o(R),o(c),o(l),M((B,te,K,z)=>{h(A,B),h(F,te),h(O,K),h(ee,z)},[()=>(n(s),n(r()),g(()=>s(r(),"login.resetConfirmTitle"))),()=>(n(s),n(r()),a(w),g(()=>s(r(),"login.resetConfirmBody",{email:a(w).trim().toLowerCase()}))),()=>(n(s),n(r()),g(()=>s(r(),"login.cancel"))),()=>(n(s),n(r()),g(()=>s(r(),"login.sendResetEmail")))]),x("click",u,()=>t(L,!1)),x("keydown",u,B=>{(B.key==="Enter"||B.key===" ")&&t(L,!1)}),x("click",D,()=>t(L,!1)),x("click",I,ze),P(e,l)};U(me,e=>{a(L)&&e(Ne)})}var pe=d(me,2),ge=i(pe),qe=i(ge,!0);o(ge),o(pe),o(ce),o(de),o(X),M((e,l,u,c)=>{_e(j,"aria-expanded",a(C)),h($e,e),h(Fe,l),h(Oe,u),h(qe,c)},[()=>(n(r()),g(()=>r().toUpperCase())),()=>(n(s),n(r()),g(()=>s(r(),"login.title"))),()=>(n(s),n(r()),g(()=>s(r(),"login.subtitle"))),()=>(n(s),n(r()),g(()=>s(r(),"login.disclaimer")))]),x("click",j,()=>t(C,!a(C))),P(Ee,X),dt()}export{zt as L};
